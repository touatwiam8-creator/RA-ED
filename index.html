<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>منصة رائد - تمارين تفاعلية</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f0f4f8; color: #1f2937; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; }
    header { background-color:#2563eb; color:white; width:100%; padding:1rem; text-align:center; font-size:1.5rem; }
    main { margin:2rem; width:90%; max-width:800px; background:white; padding:2rem; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
    textarea { width:100%; height:150px; padding:0.5rem; font-size:1rem; margin-bottom:1rem; }
    select, button { padding:0.5rem 1rem; font-size:1rem; margin-right:1rem; margin-bottom:1rem; }
    #result { margin-top:1rem; padding:1rem; border:1px solid #ccc; border-radius:5px; background-color:#eef2ff; white-space:pre-wrap; }
    .scenario { margin-bottom:1rem; padding:0.5rem; border:1px solid #ccc; border-radius:5px; background:#f9fafb; }
  </style>
</head>
<body>

<header>منصة رائد - تمارين تفاعلية لرواد الأعمال</header>

<main>
  <label for="lab">اختر المعمل:</label>
  <select id="lab">
    <option value="time">معمل الوقت</option>
    <option value="communication">معمل التواصل</option>
    <option value="writing">معمل الكتابة</option>
    <option value="sales">معمل المبيعات</option>
  </select>

  <div id="scenario" class="scenario"></div>

  <textarea id="answer" placeholder="اكتب إجابتك هنا..."></textarea>
  <br>

  <button id="submit">أرسل للإصلاح والتقييم</button>

  <div id="result"></div>
</main>

<script>
  const scenarios = {
    time: "مشروعك تأخر والمورد أبلغك بتأخير أسبوع، ماذا تفعل؟",
    communication: "عميل غاضب من تأخر منتجه، كيف تتعامل معه؟",
    writing: "اكتب بريداً إلكترونياً لعميل محتمل لتقديم خدمتك",
    sales: "عميل يقول 'السعر مرتفع'، كيف ترد؟"
  };

  const labSelect = document.getElementById("lab");
  const scenarioDiv = document.getElementById("scenario");
  const answerInput = document.getElementById("answer");
  const submitBtn = document.getElementById("submit");
  const resultDiv = document.getElementById("result");

  function updateScenario() {
    const lab = labSelect.value;
    scenarioDiv.textContent = scenarios[lab];
  }

  labSelect.addEventListener("change", updateScenario);
  updateScenario();

  submitBtn.addEventListener("click", async () => {
    const answer = answerInput.value.trim();
    if(!answer) {
      alert("الرجاء كتابة إجابتك قبل الإرسال");
      return;
    }

    resultDiv.textContent = "جارٍ توليد التقييم... ⏳";

    try {
      const response = await fetch("https://api.github.com/repos/touatwiam8-creator/RA-ED/actions/workflows/main.yml/dispatches", {
        method: "POST",
        headers: {
          "Accept": "application/vnd.github+json",
          "Authorization": "token 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"
        },
        body: JSON.stringify({
          ref: "main",
          inputs: { answer }
        })
      });

      if(response.ok){
        resultDiv.textContent = "تم إرسال إجابتك بنجاح.\nيمكنك الآن متابعة التقييم في GitHub Actions → AI Evaluation → Runs.";
      } else {
        const text = await response.text();
        resultDiv.textContent = "فشل إرسال الإجابة:\n" + text;
      }

    } catch(err){
      resultDiv.textContent = "حدث خطأ أثناء الإرسال:\n" + err.message;
    }
  });
</script>

</body>
</html>
